<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>‰∏ñÁïåÊôÇË®à</title>
    <style>
        body {
            font-family: 'Courier New', monospace;
            background-color: #1e1e1e;
            color: #d4d4d4;
            padding: 10px;
            margin: 0;
            min-height: 100vh;
            display: flex;
            justify-content: center;
            align-items: flex-start;
        }
        
        .container {
            background-color: #2d2d2d;
            padding: 20px;
            box-shadow: 0 4px 20px rgba(0, 0, 0, 0.3);
            max-width: 900px;
            width: 100%;
            margin: 0;
        }
        
        h1 {
            text-align: center;
            color: #569cd6;
            margin-bottom: 30px;
            font-size: 24px;
        }
        
        .clock-display {
            margin-bottom: 8px;
            padding: 8px 12px;
            background-color: #1e1e1e;
            border-radius: 4px;
            font-size: 14px;
            line-height: 1.6;
            white-space: nowrap;
            overflow-x: auto;
        }
        
        .time-group {
            display: flex;
            gap: 8px;
            flex-wrap: wrap;
        }
        
        .time-item {
            flex: 1;
            min-width: 150px;
            padding: 8px;
            background-color: #252526;
            border-radius: 4px;
            text-align: center;
        }
        
        .clock-display:hover {
            background-color: #252526;
        }
        
        .time-label {
            color: #4ec9b0;
        }
        
        .date {
            color: #dcdcaa;
        }
        
        .day {
            color: #ce9178;
        }
        
        .separator {
            color: #808080;
        }
        
        @media (max-width: 768px) {
            body {
                padding: 0;
                align-items: flex-start;
                height: 100vh;
                overflow: hidden;
            }
            
            .container {
                padding: 0;
                margin: 0;
                height: 100vh;
                overflow-y: auto;
                display: flex;
                flex-direction: column;
            }
            
            h1 {
                font-size: 16px;
                margin: 0;
                padding: 8px 8px 4px 8px;
            }
            
            #clockContainer {
                flex: 1;
                overflow-y: auto;
                padding: 0 8px 8px 8px;
            }
            
            .clock-display {
                font-size: 15px;
                padding: 0;
                white-space: normal;
                overflow-x: visible;
                margin-bottom: 6px;
                background-color: transparent !important;
                border: none !important;
            }
            
            .time-group {
                display: flex;
                flex-wrap: nowrap;
                gap: 1px;
                width: 100%;
            }
            
            .time-item {
                flex: 1;
                padding: 5px 6px;
                text-align: left;
                font-size: 15px;
                background-color: #1e1e1e;
                line-height: 1.6;
                border-radius: 3px;
                min-width: 0;
                overflow: hidden;
            }
            
            .separator {
                display: none;
            }
            
            
            /* Âå∫Âàá„ÇäÁ∑ö„ÇíÈùûË°®Á§∫ */
            .clock-display + div[style*="border-bottom"] {
                display: none !important;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>üåç ‰∏ñÁïåÊôÇË®à</h1>
        <div id="clockContainer"></div>
    </div>

    <script>
        const wdays = ['Êó•', 'Êúà', 'ÁÅ´', 'Ê∞¥', 'Êú®', 'Èáë', 'Âúü'];
        const baseHours = [0, 4, 8, 12, 16, 20];
        
        function isBST(date) {
            const month = date.getMonth() + 1;
            if (month < 3 || month > 10) return false;
            if (month > 3 && month < 10) return true;
            
            if (month === 3) {
                return date.getDate() >= 25;
            } else {
                return date.getDate() < 25;
            }
        }
        
        function isPDT(date) {
            const month = date.getMonth() + 1;
            if (month < 3 || month > 11) return false;
            if (month > 3 && month < 11) return true;
            
            if (month === 3) {
                return date.getDate() >= 10;
            } else {
                return date.getDate() < 7;
            }
        }
        
        function isEDT(date) {
            return isPDT(date);
        }
        
        function getTimeWithOffset(jstTime, offsetHours) {
            const time = new Date(jstTime);
            time.setHours(time.getHours() + offsetHours - 9);
            return time;
        }
        
        function getTimeColor(hour) {
            // ÊôÇÈñìÂ∏Ø„Å´Âøú„Åò„ÅüËÉåÊôØËâ≤„ÇíËøî„Åô
            if (hour >= 5 && hour < 6) {
                // Êó©ÊúùÔºöÈùí
                return '#2c5f7c';
            } else if (hour >= 6 && hour < 11) {
                // ÊúùÔºöÊ∞¥Ëâ≤
                return '#5b8fa3';
            } else if (hour >= 11 && hour <= 14) {
                // ÊòºÔºö„Ç™„É¨„É≥„Ç∏
                return '#8b5a2b';
            } else if (hour >= 15 && hour <= 18) {
                // Â§ïÊñπÔºöÁ¥´
                return '#5d3a6a';
            } else {
                // Â§úÔºöÈªí„ÄúÊöó„ÅÑËâ≤
                return '#1a1a1a';
            }
        }
        
        function formatTime(date, label) {
            const month = date.getMonth() + 1;
            const day = date.getDate();
            const wday = wdays[date.getDay()];
            const hour = date.getHours();
            const minute = date.getMinutes();
            
            if (window.innerWidth <= 768) {
                // „É¢„Éê„Ç§„É´Áâà: „Çà„Çä„Ç≥„É≥„Éë„ÇØ„Éà„Å™Ë°®Á§∫
                const flags = {
                    'Êó•Êú¨': 'üáØüáµ',
                    '„Ç§„ÇÆ„É™„Çπ': 'üá¨üáß', 
                    'SF': 'üá∫üá∏',
                    'NY': 'üá∫üá∏'
                };
                const cities = {
                    'Êó•Êú¨': 'Êù±‰∫¨',
                    '„Ç§„ÇÆ„É™„Çπ': 'London',
                    'SF': 'SF',
                    'NY': 'NY'
                };
                return `${flags[label]}${cities[label]}<br>${month}/${day}(${wday})<br>${hour}:${minute.toString().padStart(2, '0')}`;
            } else {
                return `<span class="time-label">${label}</span> <span class="date">${month.toString().padStart(2, ' ')}/${day.toString().padStart(2, ' ')}</span><span class="day">(${wday})</span> ${hour.toString().padStart(2, ' ')}:${minute.toString().padStart(2, '0')}`;
            }
        }
        
        function updateClocks() {
            const now = new Date();
            const currentHour = now.getHours();
            
            // ÁèæÂú®ÊôÇÂàª„Å´ÊúÄ„ÇÇËøë„ÅÑÂü∫Ê∫ñÊôÇÂàª„ÇíË¶ã„Å§„Åë„Çã
            let startIndex = 0;
            baseHours.forEach((hour, index) => {
                if (currentHour >= hour) {
                    startIndex = index;
                }
            });
            
            // Âü∫Ê∫ñÊôÇÂàª„Çí‰∏¶„Å≥Êõø„Åà
            const sortedHours = [...baseHours.slice(startIndex), ...baseHours.slice(0, startIndex)];
            
            const container = document.getElementById('clockContainer');
            container.innerHTML = '';
            
            // ÁèæÂú®ÊôÇÂàª„ÇíÊúÄÂàù„ÅÆË°å„Å®„Åó„Å¶ËøΩÂä†
            const currentRow = document.createElement('div');
            currentRow.className = 'clock-display';
            currentRow.style.background = '#272727';
            currentRow.style.border = '1px solid #444';
            currentRow.style.borderRadius = '4px';
            currentRow.style.padding = '4px';
            currentRow.style.marginBottom = '8px';
            
            // ÂêÑÂú∞Âüü„ÅÆÁèæÂú®ÊôÇÂàª„ÇíË®àÁÆó
            const jstNow = new Date();
            
            // „Ç§„ÇÆ„É™„Çπ
            let ukNowOffset = 0;
            const ukNow = getTimeWithOffset(jstNow, ukNowOffset);
            if (isBST(ukNow)) {
                ukNowOffset = 1;
            }
            const ukNowAdjusted = getTimeWithOffset(jstNow, ukNowOffset);
            
            // „Çµ„É≥„Éï„É©„É≥„Ç∑„Çπ„Ç≥
            let sfNowOffset = -17;
            const sfNow = getTimeWithOffset(jstNow, sfNowOffset);
            if (isPDT(sfNow)) {
                sfNowOffset = -16;
            }
            const sfNowAdjusted = getTimeWithOffset(jstNow, sfNowOffset);
            
            // „Éã„É•„Éº„É®„Éº„ÇØ
            let nyNowOffset = -14;
            const nyNow = getTimeWithOffset(jstNow, nyNowOffset);
            if (isEDT(nyNow)) {
                nyNowOffset = -13;
            }
            const nyNowAdjusted = getTimeWithOffset(jstNow, nyNowOffset);
            
            // „Éá„Çπ„ÇØ„Éà„ÉÉ„Éó„Å®„É¢„Éê„Ç§„É´„ÅßÁï∞„Å™„Çã„É¨„Ç§„Ç¢„Ç¶„Éà
            if (window.innerWidth <= 768) {
                currentRow.innerHTML = `
                    <div class="time-group">
                        <div class="time-item" style="background: ${getTimeColor(jstNow.getHours())};">${formatTime(jstNow, 'Êó•Êú¨')}</div>
                        <div class="time-item" style="background: ${getTimeColor(ukNowAdjusted.getHours())};">${formatTime(ukNowAdjusted, '„Ç§„ÇÆ„É™„Çπ')}</div>
                        <div class="time-item" style="background: ${getTimeColor(sfNowAdjusted.getHours())};">${formatTime(sfNowAdjusted, 'SF')}</div>
                        <div class="time-item" style="background: ${getTimeColor(nyNowAdjusted.getHours())};">${formatTime(nyNowAdjusted, 'NY')}</div>
                    </div>
                `;
            } else {
                currentRow.innerHTML = `${formatTime(jstNow, 'Êó•Êú¨')} <span class="separator">|</span> ${formatTime(ukNowAdjusted, '„Ç§„ÇÆ„É™„Çπ')} <span class="separator">|</span> ${formatTime(sfNowAdjusted, 'SF')} <span class="separator">|</span> ${formatTime(nyNowAdjusted, 'NY')}`;
            }
            container.appendChild(currentRow);
            
            // Âå∫Âàá„ÇäÁ∑ö„ÇíËøΩÂä†
            const divider = document.createElement('div');
            divider.style.borderBottom = '1px solid #444';
            divider.style.margin = '10px 0';
            container.appendChild(divider);
            
            const today = new Date();
            today.setHours(0, 0, 0, 0);
            
            sortedHours.forEach((hour, index) => {
                const useDate = new Date(today);
                
                // ÁèæÂú®ÊôÇÂàª„Çà„ÇäÂâç„ÅÆÊôÇÈñì„ÅØÊòéÊó•„ÅÆÊó•‰ªò„Å´„Åô„Çã
                if (index > 0 && hour < sortedHours[0]) {
                    useDate.setDate(useDate.getDate() + 1);
                }
                
                // Êó•Êú¨ÊôÇÈñì„ÇíÂü∫Ê∫ñ„Å´„Åô„Çã
                const jstTime = new Date(useDate);
                jstTime.setHours(hour, 0, 0, 0);
                
                // ÂêÑÂú∞Âüü„ÅÆÊôÇÂàª„ÇíË®àÁÆó
                // „Ç§„ÇÆ„É™„Çπ
                let ukOffset = 0;
                const ukTime = getTimeWithOffset(jstTime, ukOffset);
                if (isBST(ukTime)) {
                    ukOffset = 1;
                }
                const ukTimeAdjusted = getTimeWithOffset(jstTime, ukOffset);
                
                // „Çµ„É≥„Éï„É©„É≥„Ç∑„Çπ„Ç≥
                let sfOffset = -17;
                const sfTime = getTimeWithOffset(jstTime, sfOffset);
                if (isPDT(sfTime)) {
                    sfOffset = -16;
                }
                const sfTimeAdjusted = getTimeWithOffset(jstTime, sfOffset);
                
                // „Éã„É•„Éº„É®„Éº„ÇØ
                let nyOffset = -14;
                const nyTime = getTimeWithOffset(jstTime, nyOffset);
                if (isEDT(nyTime)) {
                    nyOffset = -13;
                }
                const nyTimeAdjusted = getTimeWithOffset(jstTime, nyOffset);
                
                // ‰∏ÄË°å„ÅßÂá∫Âäõ
                const row = document.createElement('div');
                row.className = 'clock-display';
                
                // „Éá„Çπ„ÇØ„Éà„ÉÉ„Éó„Å®„É¢„Éê„Ç§„É´„ÅßÁï∞„Å™„Çã„É¨„Ç§„Ç¢„Ç¶„Éà
                if (window.innerWidth <= 768) {
                    row.innerHTML = `
                        <div class="time-group">
                            <div class="time-item" style="background: ${getTimeColor(jstTime.getHours())};">${formatTime(jstTime, 'Êó•Êú¨')}</div>
                            <div class="time-item" style="background: ${getTimeColor(ukTimeAdjusted.getHours())};">${formatTime(ukTimeAdjusted, '„Ç§„ÇÆ„É™„Çπ')}</div>
                            <div class="time-item" style="background: ${getTimeColor(sfTimeAdjusted.getHours())};">${formatTime(sfTimeAdjusted, 'SF')}</div>
                            <div class="time-item" style="background: ${getTimeColor(nyTimeAdjusted.getHours())};">${formatTime(nyTimeAdjusted, 'NY')}</div>
                        </div>
                    `;
                } else {
                    row.innerHTML = `${formatTime(jstTime, 'Êó•Êú¨')} <span class="separator">|</span> ${formatTime(ukTimeAdjusted, '„Ç§„ÇÆ„É™„Çπ')} <span class="separator">|</span> ${formatTime(sfTimeAdjusted, 'SF')} <span class="separator">|</span> ${formatTime(nyTimeAdjusted, 'NY')}`;
                }
                
                container.appendChild(row);
            });
        }
        
        // ÂàùÂõûÂÆüË°å
        updateClocks();
        
        // 1Áßí„Åî„Å®„Å´Êõ¥Êñ∞
        setInterval(updateClocks, 1000);
        
        // „Ç¶„Ç£„É≥„Éâ„Ç¶„É™„Çµ„Ç§„Ç∫ÊôÇ„Å´ÂÜçÊèèÁîª
        let resizeTimeout;
        window.addEventListener('resize', () => {
            clearTimeout(resizeTimeout);
            resizeTimeout = setTimeout(() => {
                updateClocks();
            }, 250);
        });
    </script>
</body>
</html>